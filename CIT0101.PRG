SELECT SYSMED
SET ORDER TO SYSMED1
DEFI WIND BRMED FROM LIBRMED,CIBRMED TO LIBRMED+10,CIBRMED+79 TITLE " MEDICOS ACTIVOS ";
                FOOTER " F2=Mod,F4=Bus,ESC=Sel " DOUBLE NOFLOAT NOZOOM NOGROW SHADOW COLOR SCHEME 10
ACTI WIND BRMED
ON KEY LABEL F1
ON KEY LABEL F2 DO BRMOD
ON KEY LABEL F3
ON KEY LABEL F4 DO BRBUS
ON KEY LABEL F5
BROWSE FIELDS MEDICO:H="MED", NOMBRE:H="NOMBRE",SYSESP.DESCRI:H="Especialidad",;
              CON1MIN:H="1ra.",CON2MIN:H="Otr.",CONLAP:H="LAPSO CONS.",CONINI:H="INIC.CONS.";
              NOAPPEND NODELETE NOEDIT NOMENU NOOPTIMIZE REST SAVE IN WINDOW BRMED
RELEASE WIND BRMED
RETURN
***********************
***                 ***
***RUTINAS DE BRMED ***
***                 ***
***********************
***
PROCEDURE BRMOD
DEFI WIND WMODMED FROM LIBRMED+5,CIBRMED+10 TO LIBRMED+14,CIBRMED+75;
                  TITLE " MODIFICAR MEDICO " DOUBLE NOFLOAT NOZOOM NOGROW SHADOW COLOR SCHEME 10
ACTI WIND WMODMED
SCAT MEMVAR
@ 00,01 SAY "Medico       :"
@ 01,01 SAY "Nombre       :"
@ 02,01 SAY "Especialidad :"
@ 03,01 SAY "Mtos.1ra.Cons:"
@ 04,01 SAY "Mtos.Otr.Cons:"
@ 05,01 SAY "Lapso de Cons:"
@ 06,01 SAY "Inic. de Cons:"

@ 00,15 SAY M.MEDICO
@ 01,15 SAY M.NOMBRE
@ 02,15 SAY SYSESP.DESCRI
@ 03,15 GET M.CON1MIN picture "9999999.99"
@ 04,15 GET M.CON2MIN picture "9999999.99"
@ 05,15 GET M.CONLAP  picture "999"
@ 06,15 GET M.CONINI
READ
*** INICIO RUTINA DE ACEPTAR-CANCELAR
store 1 to wop
do while .t.
   @ 07,22  get wop pict "@*H Aceptar;Cancelar" defa wop
   read
   if lastkey()=13
      exit
   endif
enddo
*** FIN  RUTINA ACEPTAR-CANCELAR
if wop=1
   if recloc()
      gath memvar
      unlock all
   else
      store "OPERACION CANCELADA, REINTENTE" to wtext
      do aviso with wtext
   endif
endif
RELEASE WIND WMODMED
RETURN
***
PROCEDURE BRBUS
DEFI WIND WBUSMED FROM LIBRMED+5,CIBRMED+10 TO LIBRMED+10,CIBRMED+75;
                  TITLE " BUSCAR MEDICO " DOUBLE NOFLOAT NOZOOM NOGROW SHADOW COLOR SCHEME 10
ACTI WIND WBUSMED
DO WHILE .T.
   SCAT MEMV BLANK
   @ 00,01 SAY "MEDICO      :"
   @ 01,01 SAY "NOMBRE      :"
   @ 02,01 SAY "ESPECIALIDAD:"
   @ 00,15 GET M.MEDICO
   READ
   IF LASTKEY()=27
      EXIT
   ENDIF
   IF LEN(ALLTRIM(M.MEDICO))=0
      LOOP
   ENDIF
   SEEK M.MEDICO
   IF FOUND()
      EXIT
   ELSE
      STORE "NO REGISTRADO, VERIFIQUE" TO WTEXT
      DO AVISO WITH WTEXT
   ENDIF
ENDDO
RELEASE WIND WBUSMED
RETURN
***
PROCEDURE BRORD
* SET ORDER TO ??
RETURN
******************

